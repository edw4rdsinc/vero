<!DOCTYPE html>
<html>
<head>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MKCT2G2T');</script>
<!-- End Google Tag Manager -->
    <title>Debug Omega Redirect</title>
    <style>
        body { font-family: monospace; padding: 20px; background: #1a1a1a; color: #0f0; }
        .log { margin: 5px 0; padding: 5px; background: #000; }
        button { background: #ff4d00; color: white; border: none; padding: 10px; margin: 10px 0; cursor: pointer; }
    </style>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17668259433"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'AW-17668259433');
    </script>
</head>
<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MKCT2G2T"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
    <h1>Omega Redirect Debugger</h1>
    <button onclick="startListening()">Start Listening for Omega Messages</button>
    <button onclick="clearLogs()">Clear Logs</button>
    <div id="logs"></div>

    <script>
        function log(message, data = null) {
            const logs = document.getElementById('logs');
            const entry = document.createElement('div');
            entry.className = 'log';
            const timestamp = new Date().toLocaleTimeString();
            entry.innerHTML = `[${timestamp}] ${message}`;
            if (data) {
                entry.innerHTML += '<br>Data: ' + JSON.stringify(data, null, 2);
            }
            logs.prepend(entry);
        }

        function startListening() {
            log('ðŸŽ§ Listening for messages from Omega iframe...');

            // Listen for ALL messages
            window.addEventListener('message', function(event) {
                log(`ðŸ“¨ Message received from: ${event.origin}`, event.data);

                // Check if it's from Omega
                if (event.origin === 'https://app.omegaedi.com') {
                    log('âœ… Message is from Omega!', event.data);
                }
            });

            // Also open the contact page in an iframe to monitor
            const iframe = document.createElement('iframe');
            iframe.src = '/contact.html';
            iframe.style.width = '100%';
            iframe.style.height = '600px';
            iframe.style.border = '2px solid #ff4d00';
            document.body.appendChild(iframe);
            log('ðŸ“± Contact page loaded in iframe below. Try submitting the form!');
        }

        function clearLogs() {
            document.getElementById('logs').innerHTML = '';
            log('ðŸ§¹ Logs cleared');
        }

        // Auto-start
        window.onload = () => {
            log('ðŸš€ Debugger ready. Click "Start Listening" and then submit the Omega form.');
        };
    </script>
</body>
</html>
